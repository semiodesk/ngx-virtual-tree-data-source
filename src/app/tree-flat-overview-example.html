<cdk-virtual-scroll-viewport itemSize="48" style="height: 300px;">
  <!-- This needs to be the entire set of visible nodes for the scrollbar to work. -->
  <div class="tree-node" matRipple *cdkVirtualFor="let node of dataSource" [treeNode]="node" (click)="select(node)">
    <button [treeNodeToggle]="node.expandable" mat-button mat-icon-button class="mr-2" (click)="toggle(node)">
      <mat-icon *ngIf="!node.expanded">chevron_right</mat-icon>
      <mat-icon *ngIf="node.expanded">expand_more</mat-icon>
    </button>
    <div>{{ getLabel(node) || "Loading..." }}</div>
    <div *ngIf="node.loading" class="ml-auto">
      <div class="lds-ring">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
    </div>
  </div>
</cdk-virtual-scroll-viewport>
<table class="mt-5" *ngIf="dataSource">
  <tr *ngIf="dataSource.nodes">
    <td class="pr-5">Items:</td>
    <td class="text-right">{{ dataSource.nodes.length }}</td>
  </tr>
  <tr *ngIf="dataSource.nodes">
    <td class="pr-5">Selected:</td>
    <td class="text-right">{{ dataSource.selectedNode?.id }}</td>
  </tr>
  <tr *ngIf="range$ | async; let range">
    <td class="pr-5">Start:</td>
    <td class="text-right">{{ range.start }}</td>
  </tr>
  <tr *ngIf="range$ | async; let range">
    <td class="pr-5">End:</td>
    <td class="text-right">{{ range.end }}</td>
  </tr>
</table>
